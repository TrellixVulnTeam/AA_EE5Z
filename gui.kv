<WindowManager>:
    id: wm

#=================================================HOME======================================================
<HomeScreen>:
    id: 'home'
    name: 'home'

<RV>:
    viewclass: 'RVButton'
    RecycleBoxLayout:
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'

<RVButton>:
    on_release:
        root.parent.parent.parent.parent.manager.transition.direction = "left" # transition left
        app.root.add_account_screen(self.text) #creates account screen for the account represented by the button
        app.root.current = 'account'
        app.root.clear_home_screen()

<GoAddAccount>:
    text: "Add Account"
    size_hint_y: .2
    on_release:
        root.parent.parent.manager.transition.direction = "up"
        app.root.current = "add_account"
        app.root.clear_home_screen()

#=================================================ACCOUNT======================================================
<AccountScreen>:
    id: 'account'
    name: 'account'


<AllocationButton>:
    on_release:
        root.parent.set_btn_color()
        root.background_color= [0,1,0,1]

<AccountGoHome>:
    text: "Home"
    size_hint_y: .27
    on_release:
        root.parent.parent.manager.transition.direction = "right"
        app.root.add_home_screen()
        app.root.current = "home"
        app.root.clear_account_screen()

<AddAllocationGrid>:
    id: add_allocation_grid
    cols: 2
    size_hint_y: .4
    Button:
        text: "Add Allocation"
        on_release:
            print(f'AddAllocationGrid.parent.parent: {root.parent.parent}')
            root.make_info()

<AddAllocationSubmit>:
    text: "Submit"
    size_hint_x: .5
    on_release:
        #root.parent.create()
        print(f'Parent: {root.parent.parent.parent}')
        print(root.parent.parent.parent.ids.keys())

        #app.root.clear_account_screen()
        #app.root.add_account_screen("Test") # need to get account name!!!!


<AllocationGrid>:


#=================================================ADD ACCOUNT======================================================
<AddAccountScreen>:
    id: 'add_account'
    name: 'add_account'

    na_name: new_account_name
    na_balance: new_account_balance

    GridLayout:
        cols: 1
        Label:
            text: "Add Account"
        GridLayout:
            cols: 2
            Label:
                text: "Account Name"
            TextInput:
                id: new_account_name
                multiline: False
            Label:
                text: "Balance"
            TextInput:
                id: new_account_balance
                multiline: False
        Button:
            size_hint_y: .2
            text: "Submit"
            on_press: root.add_a()
        AddAccountGoHome:

<AddAccountGoHome>:
    text: "Home "
    size_hint_y: .3
    on_release:
        root.parent.parent.manager.transition.direction = "down"
        app.root.add_home_screen()
        app.root.current = "home"
        app.root.clear_account_screen()


<Popup>:
    Button:
        text: "Close"
        on_release: root.dismiss()










