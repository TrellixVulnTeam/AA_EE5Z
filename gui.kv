<MainScreen>:
    name: "ms"
    MDToolbar:
        id: toolbar
        title: "App Toolbar"
        pos_hint: {"top": 1}
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        right_action_items: [["plus",lambda x: root.ids.nl.children[1].go_addaccount()]]
    NavigationLayout:
        id: nl
        WindowManager:
            id: wm
            #y: 1-toolbar.height
            size_hint_y: (root.height - toolbar.height)/root.height


        MDNavigationDrawer:
            id: nav_drawer


<WindowManager>:
    id: wm

#=================================================HOME======================================================
<HomeScreen>:
    id: 'home'
    name: 'home'


<RV>:
    id: rv
    viewclass: 'SwipeToGo'
    RecycleBoxLayout:
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'


<SwipeToGo>:
    size_hint_y: None
    height: content.height
    anchor: "right"
    swipe_type: "hand"

    on_swipe_complete:
        root.parent.parent.parent.parent.manager.transition.direction = "left" # transition left
        app.root.ids.wm.add_account_screen(self.text)
        app.root.ids.wm.current = 'account'
        app.root.ids.wm.clear_home_screen()
        app.root.ids.toolbar.title = self.text
        print("SwipeToGo icon:", self.icon)

    MDCardSwipeLayerBox:
        icon: "right arrow"


    MDCardSwipeFrontBox:

        OneLineListItem:
            id: content
            text: root.text
            _no_ripple_effect: True
        SwipeButton:
            text: root.text
            icon: self.icons(self.text)
            padding_right: .5
            on_release: print(f"Icon: {root.icons[self.text]}\t Text: {self.text}")  #print(root.parent.parent.icons[root.text])

#=================================================ACCOUNT======================================================
<AccountScreen>:
    id: 'account'
    name: 'account'


<AccountGoHome>:
    text: "Home"
    size_hint_y: .235
    on_release:
        root.parent.parent.manager.transition.direction = "right"
        app.root.ids.wm.add_home_screen()
        app.root.ids.wm.current = "home"
        app.root.ids.wm.clear_account_screen()

<AddAllocationGrid>:
    id: add_allocation_grid
    cols: 2
    size_hint_y: .4
    Button:
        text: "Add Allocation"
        on_release:
            root.make_info()

<AllocationInfo>:

<AddAllocationSubmit>:
    text: "Submit"
    size_hint_x: .5
    on_release:
        #root.parent.create()
        print(f'Parent Account Name: {root.parent.parent.parent.an}')
        print(f'Screen children {root.parent.parent.parent.children}')


<AllocationGrid>:


#=================================================ADD ACCOUNT======================================================
<AddAccountScreen>:
    id: 'add_account'
    name: 'add_account'

    na_name: new_account_name
    na_balance: new_account_balance

    GridLayout:
        cols: 1
        GridLayout:
            cols: 1
            padding: 100
            MDTextField:
                id: new_account_name
                hint_text: "Account name"
            MDTextField:
                id: new_account_balance
                hint_text: "Balance"
        Button:
            size_hint_y: .2
            text: "Submit"
            on_press: root.add_a()
        AddAccountGoHome:

<AddAccountGoHome>:
    text: "Home "
    size_hint_y: .3
    on_release:
        root.parent.parent.manager.transition.direction = "down"
        app.root.ids.wm.add_home_screen()
        app.root.ids.wm.current = "home"
        app.root.ids.wm.clear_account_screen()


<Popup>:
    Button:
        text: "Close"
        on_release: root.dismiss()










